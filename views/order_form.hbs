<style>
  .navbar {
    display: none;
  }

  .flex-container,
  fieldset {
    display: flex;
    flex-direction: row;
  }

  .customer-details,
  .order-details {
    width: 50%;
    margin: 10px;
  }

  input[type="text"],
  input[type="email"],
  input[type="url"] {
    background-color: #ebebed;
    border: 1px solid #0000FF;
  }

  input[name='product'] {
    border: none;
  }

  input[name='product'],
  input[name='quantity'] {
    color: #0000FF;
    font-size: 14pt;
    font-family: 'Courier New', Courier, monospace;
    background-color: #ebebed;
  }
</style>

<div class="flex-container">
  <!-- ORDER FORM -->
  <form class="order" method="POST" action="/orders/new" oninput="handleInput()">
    <fieldset>
      <div class="customer-details">
        <legend>Customer</legend><br />
        <input id="user" type="hidden" name="user" value="CUSTOMER" required />
        <label>Name:</label><br />
        <input id="name" type="text" name="name" required /><br />
        <label>Country:</label><br />
        <input id="country" type="text" name="country" required /><br />
        <label>City/Town:</label><br />
        <input id="city" type="text" name="city" required /><br />
        <label>Street:</label><br />
        <input id="street" type="text" name="street" required /><br />
        <label>Address:</label><br />
        <input id="address" type="text" name="address" required /><br />
        <label>Telephone:</label><br />
        <input id="telephone" type="text" name="telephone" required /><br />
        <label>Email:</label><br />
        <input id="email" type="email" name="email" required /><br />
        <label>Website: </label><br />
        <input id="website" type="url" name="website" /><br />
      </div>
      <div class="order-details">
        <legend>Order</legend><br /><br />
        <input id="product" type="text" name="product" readonly />
        <p class="unitCost"></p>
        <label>Quantity:</label>
        <input id="quantity" type="text" name="quantity" /><br />
        <input id="unit_cost" type="hidden" name="unit_cost" readonly />
        <label>Total Cost:</label>
        <p class="totalCost"></p>
        <input id="total_cost" type="hidden" name="total_cost" readonly />
        <input id="order_date" type="hidden" name="order_date" readonly />
        <button class="btn btn-success submit" type="submit">Submit</button><br />
      </div>
    </fieldset>
  </form>

  <!-- PRODUCT FORM -->
  <form class="product" method="POST" action="/items">
    <input type="hidden" name="_id" value="{{product._id}}">
    <fieldset>
      <legend></legend><br /><input id="product_name" type="hidden" name="product_name" value="{{product.product_name}}"
        readonly /><input id="category" type="hidden" name="category" value="{{product.category}}" readonly /><input
        id="retail_price" type="hidden" name="retail_price" value="{{product.retail_price}}" readonly /><br />
    </fieldset>
  </form>
</div>

<script type="text/javascript">

  const handleInput = () => {

    // Insert Product automatically
    document.getElementById('product').value = "{{product.product_name}}";

    // Unit Cost
    document.getElementById('unit_cost').value = "{{product.retail_price}}";
    // FORMAT NUMBER AND DISPLAY AS CURRENCY
    var unitCost = new Intl.NumberFormat('en-UG', {
      style: 'currency',
      currency: 'UGX',
      minimumFractionDigits: 2
    });
    document.querySelector('.unitCost').textContent = unitCost.format(document.getElementById('unit_cost').value);

    // Total Cost
    document.getElementById('total_cost').value = Number(document.getElementById('quantity').value) * Number(document.getElementById('unit_cost').value);
    // FORMAT NUMBER AND DISPLAY AS CURRENCY
    var totalCost = new Intl.NumberFormat('en-UG', {
      style: 'currency',
      currency: 'UGX',
      minimumFractionDigits: 2
    });
    document.querySelector('.totalCost').textContent = totalCost.format(document.getElementById('total_cost').value);

    // Insert Date automatically
    document.getElementById('order_date').value = Date();

    // Transactions by User ID
    if (document.getElementById('transaction_type').value == "Purchases")
      document.getElementById('userId').value = "{{product.user_id}}";
  }

</script>